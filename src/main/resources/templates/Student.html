<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Dashboard</title>
  <style>
    /* Genel Sayfa Stilleri */
    body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f0f4f8; /* Açık gri-mavi tonları */
        color: #333;
    }

    /* Öğrenci Bilgileri Alanı */
    #studentInfo, #studentCourses, #addCourseForm {
        width: 80%;
        max-width: 800px;
        margin: 50px auto;
        padding: 30px;
        background-color: #fff; /* Beyaz arka plan */
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* Hafif gölge */
        border-radius: 8px;
    }

    /* Başlık Stili */
    h2 {
        text-align: center;
        font-size: 2em;
        color: #4b9cd3; /* Açık mavi */
        margin-bottom: 20px;
    }

    /* Öğrenci Bilgileri */
    p {
        font-size: 1.1em;
        margin: 10px 0;
    }

    p strong {
        font-weight: bold;
        color: #4b9cd3; /* Açık mavi */
    }

    /* Ders Listesi */
    #coursesList {
        list-style-type: none;
        padding: 0;
    }

    #coursesList li {
        font-size: 1.2em;
        margin: 15px 0;
        padding: 12px;
        background-color: #f7f7f7; /* Hafif gri arka plan */
        border-left: 5px solid #4b9cd3; /* Sol tarafı mavi çizgiyle vurgulama */
        border-radius: 8px;
    }

    .removeCourseBtn {
        background-color: #f44336; /* Kırmızı */
        color: white;
        padding: 5px 12px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .removeCourseBtn:hover {
        background-color: #d32f2f;
    }

    /* Ders Ekleme Formu */
    #addCourseForm {
        display: none;
        margin-top: 20px;
        text-align: center;
    }

    #addCourseForm select, #addCourseForm button {
        font-size: 1.1em;
        padding: 12px;
        margin-top: 15px;
        border-radius: 5px;
        border: 1px solid #ddd; /* Gri kenarlık */
        background-color: #f7f7f7; /* Hafif gri arka plan */
    }

    #addCourseForm select:focus, #addCourseForm button:focus {
        border-color: #4b9cd3; /* Mavi kenarlık */
    }

    /* Logout Butonu */
    #logoutBtn {
        display: block;
        width: 100%;
        margin-top: 30px;
        padding: 12px;
        background-color: #4b9cd3; /* Açık mavi */
        color: white;
        font-size: 1.2em;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    #logoutBtn:hover {
        background-color: #3578a8; /* Daha koyu mavi */
    }
  </style>
</head>
<body>

<div id="studentInfo">
  <h2>Student Information</h2>
  <p><strong>Student Name:</strong> <span id="studentName">Loading...</span></p>
  <p><strong>Address:</strong> <span id="studentAddress">Loading...</span></p>
  <p><strong>Phone:</strong> <span id="studentPhone">Loading...</span></p>
</div>

<div id="studentCourses">
  <h2>Your Courses</h2>
  <ul id="coursesList">
    <!-- Öğrencinin seçtiği dersler burada listelenecek -->
  </ul>
  <button id="addCourseBtn">Add New Course</button>
</div>

<div id="addCourseForm">
  <h3>Select a Course</h3>
  <select id="availableCourses">
    <!-- Mevcut dersler burada listelenecek -->
  </select>
  <button id="addCourseBtnSubmit">Add Course</button>
</div>

<button id="logoutBtn">Logout</button>

<script>
  $(document).ready(function() {
    // Varsayılan olarak Öğrenci Giriş Formu gösterilsin
    $('#studentForm').show();
    $('#teacherForm').hide();
    $('#studentRegisterForm').hide();
    $('#teacherRegisterForm').hide();

    // Öğrenci Girişi Butonu
    $('#studentBtn').click(function() {
      $('#studentForm').show();
      $('#teacherForm').hide();
      $('#studentRegisterForm').hide();
      $('#teacherRegisterForm').hide();
    });

    // Öğretmen Girişi Butonu
    $('#teacherBtn').click(function() {
      $('#teacherForm').show();
      $('#studentForm').hide();
      $('#studentRegisterForm').hide();
      $('#teacherRegisterForm').hide();
    });

    // Öğrenci Kayıt Ol Butonu
    $('#studentRegisterBtn').click(function() {
      $('#studentRegisterForm').show();
      $('#studentForm').hide();
      $('#teacherForm').hide();
      $('#teacherRegisterForm').hide();
    });

    // Öğretmen Kayıt Ol Butonu
    $('#teacherRegisterBtn').click(function() {
      $('#teacherRegisterForm').show();
      $('#studentForm').hide();
      $('#teacherForm').hide();
      $('#studentRegisterForm').hide();
    });

    // Öğrenci Giriş Formu Submit
    $('#studentLoginForm').submit(function(e) {
      e.preventDefault();

      const studentData = {
        studentName: $('#studentName').val(),
        studentId: $('#studentPassword').val() // Burada studentId kullanıyoruz
      };

      // Öğrenci Giriş API çağrısı
      fetch('http://localhost:8081/api/v1/student/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(studentData),
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(error => {
            throw new Error('API Yanıtı Hatası: ' + error.message);
          });
        }
        return response.json();
      })
      .then(data => {
        // Giriş başarılıysa yönlendir
        window.location.href = "Student.html"; // Öğrenci sayfasına yönlendir
      })
      .catch((error) => {
        alert('Öğrenci girişi sırasında hata oluştu: ' + error.message);
        console.error('Error:', error);
      });
    });

    // Öğretmen Giriş Formu Submit
    $('#teacherLoginForm').submit(function(e) {
      e.preventDefault();

      const teacherData = {
        teacherName: $('#teacherName').val(),
        password: $('#teacherPassword').val()
      };

      // Öğretmen Giriş API çağrısı
      fetch('http://localhost:8081/api/v1/teacher/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(teacherData),
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(error => {
            throw new Error('API Yanıtı Hatası: ' + error.message);
          });
        }
        return response.json();
      })
      .then(data => {
        // Giriş başarılıysa yönlendir
        window.location.href = "Teacher.html"; // Öğretmen sayfasına yönlendir
      })
      .catch((error) => {
        alert('Öğretmen girişi sırasında hata oluştu: ' + error.message);
        console.error('Error:', error);
      });
    });

    // Öğrenci Kayıt Formu Submit (fetch ile)
    $('#studentRegisterFormContent').submit(function(e) {
      e.preventDefault();

      const studentData = {
        studentName: $('#studentRegisterName').val(),
        address: $('#studentAddress').val(),
        phone: $('#studentPhone').val()
      };

      // fetch ile öğrenci verisini gönder
      fetch('http://localhost:8081/api/v1/student/save', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(studentData),
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(error => {
            throw new Error('API Yanıtı Hatası: ' + error.message);
          });
        }
        return response.json();
      })
      .then(data => {
        alert('Öğrenci kaydı başarılı!');
        $('#studentRegisterForm').hide();
        $('#studentForm').show();
      })
      .catch((error) => {
        alert('Öğrenci kaydı sırasında hata oluştu: ' + error.message);
        console.error('Error:', error);
      });
    });

    // Öğretmen Kayıt Formu Submit (fetch ile)
    $('#teacherRegisterFormContent').submit(function(e) {
      e.preventDefault();

      const teacherData = {
        teachername: $('#teacherRegisterName').val(),
        address: $('#teacherAddress').val(),
        phone: $('#teacherPhone').val()
      };

      // fetch ile öğretmen verisini gönder
      fetch('http://localhost:8081/api/v1/teacher/save', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(teacherData),
      })
      .then(response => {
        if (!response.ok) {
          return response.json().then(error => {
            throw new Error('API Yanıtı Hatası: ' + error.message);
          });
        }
        return response.json();
      })
      .then(data => {
        alert('Öğretmen kaydı başarılı!');
        $('#teacherRegisterForm').hide();
        $('#teacherForm').show();
      })
      .catch((error) => {
        alert('Öğretmen kaydı sırasında hata oluştu: ' + error.message);
        console.error('Error:', error);
      });
    });
 });

</script>

</body>
</html>