<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cosmo/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<style>
    /* Genel Stil Ayarları */
 body {
     font-family: 'Arial', sans-serif;
     background: linear-gradient(to right, #6a11cb, #2575fc); /* Modern degrade arka plan */
     color: #333; /* Yazı rengi */
     margin: 0;
     padding: 0;
 }

 /* Ana Konteyner */
 .container {
     background-color: rgba(255, 255, 255, 0.9); /* Şeffaf beyaz arka plan */
     border-radius: 15px; /* Yuvarlak köşeler */
     padding: 30px;
     box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* Hafif gölge */
     max-width: 800px;
     margin: 50px auto;
 }

 /* Başlıklar */
 h2, h4 {
     color: #2c3e50; /* Koyu mavi tonları */
     text-align: center;
     margin-bottom: 20px;
     font-weight: 600;
 }

 h2 {
     font-size: 2.2em;
 }

 h4 {
     font-size: 1.5em;
 }

 /* Form ve Input Alanları */
 .form-group {
     margin-bottom: 20px;
 }

 label {
     font-size: 1.1em;
     color: #34495e; /* Başlık renk tonu */
     font-weight: bold;
 }

 input[type="text"], input[type="password"] {
     width: 100%;
     padding: 10px;
     border-radius: 8px;
     border: 2px solid #ddd;
     font-size: 1em;
     margin-top: 5px;
     transition: all 0.3s ease;
 }

 input[type="text"]:focus, input[type="password"]:focus {
     border-color: #3498db; /* Odaklanma mavi kenarlık */
     outline: none;
     box-shadow: 0 0 10px rgba(52, 152, 219, 0.5); /* Mavi parıltı */
 }

 /* Modern Buton Stilleri */
 button {
     background: linear-gradient(135deg, #6a11cb, #2575fc); /* Modern degrade */
     color: white;
     padding: 12px 24px; /* Buton iç dolgunluğu */
     border-radius: 12px;
     border: none;
     font-size: 1em;
     font-weight: bold;
     cursor: pointer;
     text-transform: uppercase;
     transition: all 0.3s ease;
     box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
 }

 /* Buton Hover Durumu */
 button:hover {
     background: linear-gradient(135deg, #2575fc, #6a11cb); /* Ters degrade */
     transform: translateY(-2px);
     box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
 }

 /* Buton Aktif Durumu */
 button:active {
     transform: translateY(0); /* Tıklama efekti */
     box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
 }

 /* İkinci Buton Stili */
 button.secondary {
     background: linear-gradient(135deg, #95a5a6, #7f8c8d); /* Gri degrade */
 }

 button.secondary:hover {
     background: linear-gradient(135deg, #7f8c8d, #95a5a6);
 }

 /* Buton Bağlantı */
 button.btn-link {
     background: none;
     color: #2575fc;
     border: none;
     padding: 0;
     font-size: 1em;
     font-weight: bold;
     text-decoration: underline;
     cursor: pointer;
 }

 button.btn-link:hover {
     color: #6a11cb;
 }

 /* Form Konteyneri */
 #studentForm, #teacherForm, #studentRegisterForm, #teacherRegisterForm {
     display: none;
     padding-top: 20px;
 }

 /* Mobil Uyumluluk */
 @media (max-width: 768px) {
     .container {
         padding: 20px;
         margin: 20px;
     }

     h2 {
         font-size: 1.8em;
     }

     button {
         font-size: 0.9em;
     }
 }

</style>
<body>
<div class="container">
    <h2>Giriş Yap</h2>
    <!-- Öğrenci ve Öğretmen Seçim Butonları -->
    <div class="text-center mb-4">
        <button id="studentBtn" class="btn btn-primary">Öğrenci Girişi</button>
        <button id="teacherBtn" class="btn btn-info ml-3">Öğretmen Girişi</button>
    </div>

    <!-- Öğrenci Giriş Formu -->
    <div id="studentForm" class="form-container">
        <h4>Öğrenci Girişi</h4>
        <form id="studentLoginForm">
            <div class="form-group">
                <label for="studentName">Öğrenci Adı</label>
                <input type="text" id="studentName" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="studentPassword">Öğrenci Numarası</label>
                <input type="password" id="studentPassword" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Giriş Yap</button>
            <button type="button" id="studentRegisterBtn" class="btn btn-link btn-block">Kayıt Ol</button>
        </form>
    </div>

    <!-- Öğretmen Giriş Formu -->
    <div id="teacherForm" class="form-container" style="display: none;">
        <h4>Öğretmen Girişi</h4>
        <form id="teacherLoginForm">
            <div class="form-group">
                <label for="teacherName">Öğretmen Adı</label>
                <input type="text" id="teacherName" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="teacherPassword">Öğretmen Numarası</label>
                <input type="password" id="teacherPassword" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-info btn-block">Giriş Yap</button>
            <button type="button" id="teacherRegisterBtn" class="btn btn-link btn-block">Kayıt Ol</button>
        </form>
    </div>

    <!-- Kayıt Formu (Öğrenci için) -->
    <div id="studentRegisterForm" style="display: none;">
        <h4>Öğrenci Kaydı</h4>
        <form id="studentRegisterFormContent">
            <div class="form-group">
                <label for="studentRegisterName">Öğrenci Adı</label>
                <input type="text" id="studentRegisterName" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="studentAddress">Adres</label>
                <input type="text" id="studentAddress" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="studentPhone">Telefon</label>
                <input type="text" id="studentPhone" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-success btn-block">Kaydı Tamamla</button>
        </form>
    </div>

    <!-- Kayıt Formu (Öğretmen için) -->
    <div id="teacherRegisterForm" style="display: none;">
        <h4>Öğretmen Kaydı</h4>
        <form id="teacherRegisterFormContent">
            <div class="form-group">
                <label for="teacherRegisterName">Öğretmen Adı</label>
                <input type="text" id="teacherRegisterName" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="teacherAddress">Adres</label>
                <input type="text" id="teacherAddress" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="teacherPhone">Telefon</label>
                <input type="text" id="teacherPhone" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-success btn-block">Kaydı Tamamla</button>
        </form>
    </div>
</div>

<script>
    $(document).ready(function() {
     // Varsayılan olarak Öğrenci Giriş Formu gösterilsin
     $('#studentForm').show();
     $('#teacherForm').hide();
     $('#studentRegisterForm').hide();
     $('#teacherRegisterForm').hide();

     // Öğrenci Girişi Butonu
     $('#studentBtn').click(function() {
         $('#studentForm').show();
         $('#teacherForm').hide();
         $('#studentRegisterForm').hide();
         $('#teacherRegisterForm').hide();
     });

     // Öğretmen Girişi Butonu
     $('#teacherBtn').click(function() {
         $('#teacherForm').show();
         $('#studentForm').hide();
         $('#studentRegisterForm').hide();
         $('#teacherRegisterForm').hide();
     });

     // Öğrenci Kayıt Ol Butonu
     $('#studentRegisterBtn').click(function() {
         $('#studentRegisterForm').show();
         $('#studentForm').hide();
         $('#teacherForm').hide();
         $('#teacherRegisterForm').hide();
     });

     // Öğretmen Kayıt Ol Butonu
     $('#teacherRegisterBtn').click(function() {
         $('#teacherRegisterForm').show();
         $('#studentForm').hide();
         $('#teacherForm').hide();
         $('#studentRegisterForm').hide();
     });

     // Öğrenci Giriş Formu Submit
     $('#studentLoginForm').submit(function(e) {
         e.preventDefault();

         const studentData = {
             studentName: $('#studentName').val(),
             studentId: $('#studentPassword').val() // Burada studentId kullanıyoruz
         };

         // Öğrenci Giriş API çağrısı
         fetch('http://localhost:8081/api/v1/student/login', {
             method: 'POST',
             headers: {
                 'Content-Type': 'application/json',
             },
             body: JSON.stringify(studentData),
         })
         .then(response => {
             if (!response.ok) {
                 return response.json().then(error => {
                     throw new Error('API Yanıtı Hatası: ' + error.message);
                 });
             }
             return response.json();
         })
         .then(data => {
             // Giriş başarılıysa yönlendir
             if (data.message === "Giriş başarılı!") {
                 window.location.href = "Student.html"; // Öğrenci sayfasına yönlendir
             } else {
                 alert(data.message); // Hata mesajını kullanıcıya göster
             }
         })
         .catch((error) => {
             alert('Öğrenci girişi sırasında hata oluştu: ' + error.message);
             console.error('Error:', error);
         });
     });

     // Öğretmen Giriş Formu Submit
     $('#teacherLoginForm').submit(function(e) {
         e.preventDefault();

         const teacherData = {
             teacherName: $('#teacherName').val(),
             teacherId: $('#teacherPassword').val() // Burada teacherId kullanıyoruz
         };

         // Öğretmen Giriş API çağrısı
         fetch('http://localhost:8081/api/v1/teacher/login', {
             method: 'POST',
             headers: {
                 'Content-Type': 'application/json',
             },
             body: JSON.stringify(teacherData),
         })
         .then(response => {
             if (!response.ok) {
                 return response.json().then(error => {
                     throw new Error('API Yanıtı Hatası: ' + error.message);
                 });
             }
             return response.json();
         })
         .then(data => {
             // Giriş başarılıysa yönlendir
             if (data.message === "Giriş başarılı!") {
                 window.location.href = "Teacher.html"; // Öğretmen sayfasına yönlendir
             } else {
                 alert(data.message); // Hata mesajını kullanıcıya göster
             }
         })
         .catch((error) => {
             alert('Öğretmen girişi sırasında hata oluştu: ' + error.message);
             console.error('Error:', error);
         });
     });

     // Öğrenci Kayıt Formu Submit (fetch ile)
     $('#studentRegisterFormContent').submit(function(e) {
         e.preventDefault();

         const studentData = {
             studentName: $('#studentRegisterName').val(),
             address: $('#studentAddress').val(),
             phone: $('#studentPhone').val()
         };

         // fetch ile öğrenci verisini gönder
         fetch('http://localhost:8081/api/v1/student/save', {
             method: 'POST',
             headers: {
                 'Content-Type': 'application/json',
             },
             body: JSON.stringify(studentData),
         })
         .then(response => {
             if (!response.ok) {
                 return response.json().then(error => {
                     throw new Error('API Yanıtı Hatası: ' + error.message);
                 });
             }
             return response.json();
         })
         .then(data => {
             alert('Öğrenci kaydı başarılı!');
             $('#studentRegisterForm').hide();
             $('#studentForm').show();
         })
         .catch((error) => {
             alert('Öğrenci kaydı sırasında hata oluştu: ' + error.message);
             console.error('Error:', error);
         });
     });

     // Öğretmen Kayıt Formu Submit (fetch ile)
     $('#teacherRegisterFormContent').submit(function(e) {
         e.preventDefault();

         const teacherData = {
             teachername: $('#teacherRegisterName').val(),
             address: $('#teacherAddress').val(),
             phone: $('#teacherPhone').val()
         };

         // fetch ile öğretmen verisini gönder
         fetch('http://localhost:8081/api/v1/teacher/save', {
             method: 'POST',
             headers: {
                 'Content-Type': 'application/json',
             },
             body: JSON.stringify(teacherData),
         })
         .then(response => {
             if (!response.ok) {
                 return response.json().then(error => {
                     throw new Error('API Yanıtı Hatası: ' + error.message);
                 });
             }
             return response.json();
         })
         .then(data => {
             alert('Öğretmen kaydı başarılı!');
             $('#teacherRegisterForm').hide();
             $('#teacherForm').show();
         })
         .catch((error) => {
             alert('Öğretmen kaydı sırasında hata oluştu: ' + error.message);
             console.error('Error:', error);
         });
     });
 });

</script>
</body>
</html>